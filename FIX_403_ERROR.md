# üîê –†–ï–®–ï–ù–ò–ï –û–®–ò–ë–ö–ò "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω" (403)

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

```
flutter: Error loading projects: –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
flutter: Error loading tasks: –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
```

---

## üîç –ü–†–ò–ß–ò–ù–ê

–ü–æ—Å–ª–µ **Hot Restart (R)** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, –Ω–æ:
- –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω
- –ó–∞–ø—Ä–æ—Å—ã –∫ `/projects` –∏ `/tasks` —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403** –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ (–ë–´–°–¢–†–û)

1. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
   - –ù–∞–∂–∞—Ç—å "–í—ã—Ö–æ–¥" (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞)
   - –ò–ª–∏ –∑–∞–∫—Ä—ã—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–Ω–æ–≤–æ

2. **–í–æ–π—Ç–∏:**
   ```
   Email: ivan@gmail.com
   Password: password123
   ```

3. **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Å —Ç–æ–∫–µ–Ω–æ–º ‚úÖ

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. **–ù–∞–∂–∞—Ç—å "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"**

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å:**
   ```
   –ò–º—è: Test User
   Email: testuser@example.com
   –ü–∞—Ä–æ–ª—å: password123 (–º–∏–Ω–∏–º—É–º 8!)
   –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: password123
   ```

3. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** ‚úÖ

---

## üîß –ü–û–ß–ï–ú–£ –≠–¢–û –ü–†–û–ò–°–•–û–î–ò–¢?

### Hot Restart –æ—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```dart
// –ü–æ—Å–ª–µ hot restart:
_status = AuthStatus.initial  // ‚ùå –ù–µ authenticated
_token = null                 // ‚ùå –¢–æ–∫–µ–Ω –ø–æ—Ç–µ—Ä—è–Ω
_currentUser = null          // ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
```

### –ö–∞–∫ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

```dart
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞:
_status = AuthStatus.authenticated  // ‚úÖ
_token = "eyJhbGciOiJIUzUx..."      // ‚úÖ –ï—Å—Ç—å —Ç–æ–∫–µ–Ω
_currentUser = TeamMember(...)       // ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
```

---

## üìä –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –†–ê–ë–û–¢–ê–ï–¢

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:

1. **–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω:**
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–≤–µ—Ä—Ö—É
   - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - –ù–µ—Ç –æ—à–∏–±–æ–∫ "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"

2. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
   - –£—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
   - –ü—Ä–æ–µ–∫—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

3. **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç

---

## üîê –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø

### 1. –í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
```dart
POST /auth/login
{
  "email": "ivan@gmail.com",
  "password": "password123"
}

// –û—Ç–≤–µ—Ç:
{
  "success": true,
  "data": {
    "accessToken": "eyJhbGci...",  // ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
    "refreshToken": "eyJhbGci...",
    "user": {...}
  }
}
```

### 2. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:
```dart
GET /projects
Headers: {
  "Authorization": "Bearer eyJhbGci..."  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
}
```

### 3. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω:
```java
JwtAuthenticationFilter ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç userId ‚Üí –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç
```

---

## ‚ö†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–õ–Ø PRODUCTION

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ:

### 1. –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –≤ Shared Preferences:

```dart
// –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞:
await _prefsService.setAccessToken(token);
await _prefsService.setRefreshToken(refreshToken);
await _prefsService.setLoggedIn(true);
```

### 2. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

```dart
// –í AuthProvider constructor:
Future<void> _checkAuthStatus() async {
  final token = await _prefsService.getAccessToken();
  if (token != null) {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await _loadUserProfile();
  }
}
```

### 3. –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω –µ—Å–ª–∏ –∏—Å—Ç–µ–∫:

```dart
if (response.statusCode == 401) {
  // –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫
  await _refreshToken();
}
```

---

## üéØ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï –°–ï–ô–ß–ê–°

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Flutter:

**–ù–∞–∂–º–∏—Ç–µ:** `q` (quit)

**–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:**
```bash
flutter run -d "iPhone 16 Pro"
```

**–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
1. –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
2. Email: `ivan@gmail.com`
3. Password: `password123`
4. –í–æ–π—Ç–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```
‚úÖ –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
‚úÖ –ü—Ä–æ–µ–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## üìù –¢–ï–°–¢–û–í–´–ï –ê–ö–ö–ê–£–ù–¢–´

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1:
```
Email: ivan@gmail.com
Password: password123
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2:
```
Email: maria@gmail.com
Password: password123
```

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ:
```
–ò–º—è: [–í–∞—à–µ –∏–º—è]
Email: [—É–Ω–∏–∫–∞–ª—å–Ω—ã–π email]
Password: password123
```

---

## ‚úÖ –ü–û–°–õ–ï –í–•–û–î–ê –í–°–Å –ó–ê–†–ê–ë–û–¢–ê–ï–¢

- ‚úÖ –ü—Ä–æ–µ–∫—Ç—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è
- ‚úÖ –ó–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–ü–†–û–°–¢–û –í–û–ô–î–ò–¢–ï –ó–ê–ù–û–í–û –ò –í–°–Å –ó–ê–†–ê–ë–û–¢–ê–ï–¢!** üîë

**–ö–æ–º–∞–Ω–¥–∞:**
1. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ‚Üí –í—ã–π—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞)
2. –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `q` ‚Üí `flutter run`
3. –í–æ–π—Ç–∏: `ivan@gmail.com` / `password123`
4. –ì–æ—Ç–æ–≤–æ! ‚úÖ
